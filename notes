#prepare service
mkdir auth
npm init -y
npm install typescript ts-node-dev express @types/express
auth/  tsc --init 

#install skaffold
Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))


#install ingress: 
kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.0.3/deploy/static/provider/cloud/deploy.yaml
change host file

'thisisunsafe' to  skip chrome ssl security 

npm install --save express-validator
npm install express-async-errors
npm install mongoose
npm install cookie-session  (optional native types support: @types/cookie-session)
npm install jsonwebtoken @types/jsonwebtoken 
https://jwt.io/

kubectl create secret generic jwt-secret --from-literal=jwt_key=mysecretpass
kubectl get secrets

npm install --save-dev @types/jest @types/supertest jest ts-jest supertest mongodb-memory-server
npm run test

mkdir client
npm install react react-dom next
npm run dev
docker build -t fotisss/client .

npm install bootstrap
npm install axios

// get ingress service name
kubectl get services -n ingress-nginx 

http://ingress-nginx-controller.ingress-nginx.svc.cluster.local

//Publishing npm modules
mkdir common
npm init -y
-- change package.json
npm login
npm publish --access public
// setup of common
tsc --init
npm install typescript del-cli --save-dev
-- package.json  
add main, types, files
    "clean": "del-cli ./build/*",
    "build": "npm run clean && tsc"
--- tsconfig.json  
  "declaration": true,
  "outDir": "./build",

npm version patch (update version)
npm run build
npm publish

move errors and middleware to common
npm install express express-validator cookie-session jsonwebtoken @types/cookie-session @types/express @types/jsonwebtoken

// install to auth module & change references
npm install @infoset.co/common
npm update @infoset.co/common

//verify version
kubectl exec -it auth-depl-43kmjnjk2h4 sh